<!DOCTYPE html>
<html lang="pt-Br" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Blacklist</title>
	<link th:href="@{/css/style.css}" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<script th:src="@{/js/script.js}" type="text/javascript"></script>
</head>
<body id="batalha">
    <div class="text-center" id="tabelaBatalha">
		<div id="tabelaBatalha">
			<table id="tabelaBatalhaHeroi">
				<tr th:each="batalhaHeroi : ${batalhaHeroi}">
					<td id="heroiBatalha">
						<img th:src="${batalhaHeroi.imgbatalha}" id="imgBatalhaHeroi">
					</td>
				</tr>
			</table>
			<table id="tabelaBatalhaHistorico">
				<tr>
					<td id="tdheroiIcon">
						<img src="/Blacklist/icons/nomeHeroi.svg" id="nomeIconHeroi" data-toggle="tooltip" title="NOME HERÓI" />
						<img src="/Blacklist/icons/levelHeroi.svg" id="levelIconHeroi" data-toggle="tooltip" title="LEVEL HERÓI" />
						<img src="/Blacklist/icons/ataqueHeroi.svg" id="ataqueIconHeroi" data-toggle="tooltip" title="ATAQUE HERÓI" />
						<img src="/Blacklist/icons/defesaHeroi.svg" id="defesaIconHeroi" data-toggle="tooltip" title="DEFESA HERÓI" />					
						<img src="/Blacklist/icons/magiaHeroi.svg" id="magiaIconHeroi" data-toggle="tooltip" title="MAGIA HERÓI" />
						<img src="/Blacklist/icons/pocaoHeroi.svg" id="pocaoIconHeroi" data-toggle="tooltip" title="POÇÃO HERÓI" />
					</td>
					<td th:each="batalhaHeroi : ${batalhaHeroi}" id="tdHeroiInfo">
						<span th:text="${batalhaHeroi.id}" id="idHeroiBatalha" hidden />
						<strong th:text="${batalhaHeroi.nome}" id="heroiNome" data-toggle="tooltip" title="NOME HERÓI"></strong>
						<span th:text="${batalhaHeroi.level}" id="heroiLevel" data-toggle="tooltip" title="VALOR LEVEL"></span>
						<span th:text="${batalhaHeroi.ataque}" id="heroiAtaque" data-toggle="tooltip" title="VALOR ATAQUE"></span>
						<span th:text="${batalhaHeroi.defesa}" id="heroiDefesa" data-toggle="tooltip" title="VALOR DEFESA"></span>
						<button type="button" id="btnMagiaHeroi" onclick="usarMagiaHeroi()" data-toggle="tooltip" title="USAR MAGIA"><span th:text="${batalhaHeroi.magia}" id="heroiMagia"></span></button>
						<button type="button" id="btnPocaoHeroi" onclick="usarPocaoHeroi()" data-toggle="tooltip" title="USAR POÇÃO"><span th:text="${batalhaHeroi.pocao}" id="heroiPocao"></span></button>
					</td>
					<td rowspan="2" id="tdBatalha">
						<div id="divBatalha">
							<div id="divDados">
					            <span id="dadoHeroi" data-toggle="tooltip" title="VALOR DADO DO HÉROI"></span>
					            <span id="x"><h3><b>X</b></h3></span>
					            <span id="dadoVilao" data-toggle="tooltip" title="VALOR DADO DO VILÃO"></span>
					        </div>
					        <div id="divBtnRolarDados">
					            <button class="btn btn-light" type="button" onclick="execucaoBatalha()" id="btnRolarDados">ROLAR DADOS</button>
					        </div>
					        <div id="divHistorico">
					            <span id="historicoLista"></span>
					        </div>
						</div>
					</td>
					<td th:each="batalhaVilao : ${batalhaVilao}" id="tdVilaoInfo">
						<span th:text="${batalhaVilao.id}" id="idVilaoBatalha" hidden />
						<strong th:text="${batalhaVilao.nome}" id="vilaoNome" data-toggle="tooltip" title="NOME VILÃO"></strong>
						<span th:text="${batalhaVilao.level}" id="vilaoLevel" data-toggle="tooltip" title="VALOR LEVEL"></span>
						<span th:text="${batalhaVilao.ataque}" id="vilaoAtaque" data-toggle="tooltip" title="VALOR ATAQUE"></span>
						<span th:text="${batalhaVilao.defesa}" id="vilaoDefesa" data-toggle="tooltip" title="VALOR DEFESA"></span>
						<button type="button" id="btnMagiaVilao" onclick="usarMagiaVilao()" data-toggle="tooltip" title="QUANTIDADE MAGIA VILÃO"><span th:text="${batalhaVilao.magia}" id="vilaoMagia"></span></button>
						<button type="button" id="btnPocaoVilao" onclick="usarPocaoVilao()" data-toggle="tooltip" title="QUANTIDADE POÇÃO VILÃO"><span th:text="${batalhaVilao.pocao}" id="vilaoPocao"></span></button>	
					</td>
					<td id="tdVilaoIcon">
						<img src="/Blacklist/icons/nomeVilao.svg" id="nomeIconVilao" data-toggle="tooltip" title="NOME VILÃO" />
						<img src="/Blacklist/icons/levelVilao.svg" id="levelIconVilao" data-toggle="tooltip" title="LEVEL VILÃO" />
						<img src="/Blacklist/icons/ataqueVilao.svg" id="ataqueIconVilao" data-toggle="tooltip" title="ATAQUE VILÃO" />
						<img src="/Blacklist/icons/defesaVilao.svg" id="defesaIconVilao" data-toggle="tooltip" title="DEFESA VILÃO" />				
						<img src="/Blacklist/icons/magiaVilao.svg" id="magiaIconVilao" data-toggle="tooltip" title="MAGIA VILÃO" />
						<img src="/Blacklist/icons/pocaoVilao.svg" id="pocaoIconVilao" data-toggle="tooltip" title="POÇÃO VILÃO" />
					</td>
				</tr>
				<tr>
					<td colspan="2" th:each="batalhaHeroi : ${batalhaHeroi}" id="tdVidaHeroi" class="bar-container">
					    <div class="bar-background"></div>
					    <div class="bar" id="barraVidaHeroi"><span th:text="${batalhaHeroi.vida}" id="heroiVida"></span></div>
					    <span th:text="${batalhaHeroi.vida}" id="heroiVidaTotal" hidden/>
					</td>
					<td colspan="2" th:each="batalhaVilao : ${batalhaVilao}" id="tdVidaVilao" class="bar-container">
					    <div class="bar-background"></div>
					    <div class="bar" id="barraVidaVilao"><span th:text="${batalhaVilao.vida}" id="vilaoVida"></div>
					    <span th:text="${batalhaVilao.vida}" id="vilaoVidaTotal" hidden/>
					</td>
				</tr>
			</table>
			<table id="tabelaBatalhaVilao">
				<tr th:each="batalhaVilao : ${batalhaVilao}">
					<td id="vilaoBatalha">
						<img th:src="${batalhaVilao.imgbatalha}" id="imgBatalhaVilao">    
					</td>    
				</tr>
			</table>
		</div>
    </div>
    <div id="loading-container">
	    <div id="progress-container">
	        <div id="loading-text">ATUALIZANDO LISTA DE VILÕES...</div>
	        <div id="progress-bar">
	            <div id="progress-bar-inner"></div>
	        </div>
	        <div id="progress-info"></div>
	    </div>
	</div>
	<div class="modal fade" id="modalFinalizarBatalha" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="tituloResultado">Resultado da Batalha:</h5>
				</div>
				<div class="modal-body">
					<div id="divResultado">
						<span id="resultadoBatalha"></span>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" th:onclick="fecharModalFinalizarBatalha()">Cancelar</button>
					<button type="button" class="btn btn-primary" th:onclick="resultadoFinal()">Finalizar</button>
				</div>
			</div>
		</div>
	</div>
	<div id="loading">
        <div id="loading-circle"></div>
    </div>
</body>
</html>